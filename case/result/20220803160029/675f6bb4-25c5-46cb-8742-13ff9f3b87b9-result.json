{"name": "量表管理", "status": "failed", "statusDetails": {"message": "AssertionError: None\nassert 'SCALE1136690...6100454418577' == '测试量表No.769'\n  - 测试量表No.769\n  + SCALE113669022296100454418577", "trace": "Login = (<KeyWords.keyword_web.WebKeys object at 0x0000026E86A817F0>, <Logger logger (DEBUG)>)\nscale = {'button': '//*[@id=\"root\"]/div/section/section/main/div/div[2]/div[2]/div/div[3]/button[2]/span', 'check_box': 'td[cl...v[2]/div[2]/div/div/div/div/div/div[2]/table/tbody/tr[2]/td[3]/span', 'factor_name': '因子测试No.${random.int(9999)}', ...}\n\n    @pytest.mark.parametrize('scale',load_yaml('../data/scale_management.yaml'))\n    @allure.epic('测评管理')\n    @allure.severity('normal')\n    @allure.story('量表管理')\n    def test_07(Login,scale):\n        wk, log = Login\n        allure.dynamic.title(scale['title'])\n        with allure.step('点击进入测评管理'):\n            wk.click('xpath','//span[text()=\"测评管理\"]')\n        with allure.step('点击进入量表管理'):\n            wk.click('xpath','//a[text()=\"量表管理\"]')\n        with allure.step('点击进入新增量表'):\n            wk.click('xpath',scale['new_scale'])\n        with allure.step('选择量表分类'):\n            wk.click('id','advanced_search_typeId')\n            wk.click('xpath','//span[text()=\"教育行业-中学-1\"]')\n        with allure.step('填写量表名称'):\n            scale_name = '测试量表No.' + str(get_random(1, 999))\n            wk.input('id', 'advanced_search_name', scale_name)\n        with allure.step('选择量表类型'):\n            wk.click('id', 'advanced_search_type')\n            wk.click('xpath', '//div[text()=\"专业性量表\"]')\n        with allure.step('上传主题配图'):\n            png1 = os.path.abspath('微信截图_20220622155317.png')\n            png2 = os.path.abspath('微信截图_20220622155606.png')\n            wk.click('xpath',scale['upload1'])\n            wk.wait(2)\n            UpLoad(png1)\n            wk.wait(1)\n            wk.click('xpath', scale['upload2'])\n            wk.wait(2)\n            UpLoad(png2)\n        with allure.step('填写市场价'):\n            wk.input('id','advanced_search_marketPrice',randint(1,999))\n        with allure.step('选择量表状态'):\n            wk.click('xpath','//span[text()=\"开启\"]')\n        with allure.step('保存量表基本信息'):\n            wk.click('xpath', '//span[text()=\"保存并下一步\"]')\n        with allure.step('添加维度'):\n            wk.click('xpath','//span[text()=\"添加维度\"]')\n            wk.wait(2)\n            #选择所有的checkbox并全部勾上\n            checkboxes = wk.locators('css selector',scale['check_box'])\n            for checkbox in checkboxes:\n                    wk.wait(0.5)\n                    checkbox.click()\n            # # 把页面上最后1个checkbox的勾给去掉\n            # checkboxes.pop().click()\n            #提交选择的题目\n            wk.click('xpath','//p[text()=\"确定\"]')\n            wk.wait(2)\n            # 等待页面加载完成，点击保存并下一步\n            wk.click('xpath',scale['button'])\n        with allure.step('量表计分模块'):\n            #点击量表得分\n            wk.click('xpath',scale['scale_scoring'])\n            #选择计分方式\n            wk.click('xpath','//div[text()=\"求平均值\"]')\n            wk.wait(1)\n            wk.click('xpath',scale['next'])\n        with allure.step('结果解释模块'):\n            #点击添加选项按钮\n            wk.click('xpath','//span[text()=\"添加选项\"]')\n            wk.wait(2)\n            #填入最小值\n            wk.input('id','tableForm_0_minScore',1)\n            #填入最大值\n            wk.input('id', 'tableForm_0_maxScore', 10)\n            #填写结果\n            wk.input('id','tableForm_0_result','非常好')\n            #填写结果解释\n            wk.input('xpath',scale['result'],scale['txt'])\n            #保存并提交\n            wk.click('xpath','//span[text()=\"保存并提交\"]')\n            wk.wait(3)\n        with allure.step('查询新增的维度，检验新增是否成功'):\n            wk.input('id', 'advanced_search_scaleNameOrId', scale_name)\n            wk.click('xpath', '//*[text()=\"查询\"]')\n            expected_result = wk.get_text(scale['expected_result'])\n>           assert expected_result == scale_name, log.error(f\"添加维度失败，没有找到维度名称为{scale_name}的因子信息\")\nE           AssertionError: None\nE           assert 'SCALE1136690...6100454418577' == '测试量表No.769'\nE             - 测试量表No.769\nE             + SCALE113669022296100454418577\n\noms.py:383: AssertionError"}, "steps": [{"name": "点击进入测评管理", "status": "passed", "start": 1659513661428, "stop": 1659513661490}, {"name": "点击进入量表管理", "status": "passed", "start": 1659513661490, "stop": 1659513661542}, {"name": "点击进入新增量表", "status": "passed", "start": 1659513661542, "stop": 1659513661667}, {"name": "选择量表分类", "status": "passed", "start": 1659513661667, "stop": 1659513661863}, {"name": "填写量表名称", "status": "passed", "start": 1659513661863, "stop": 1659513661971}, {"name": "选择量表类型", "status": "passed", "start": 1659513661971, "stop": 1659513662159}, {"name": "上传主题配图", "status": "passed", "start": 1659513662159, "stop": 1659513667391}, {"name": "填写市场价", "status": "passed", "start": 1659513667391, "stop": 1659513667508}, {"name": "选择量表状态", "status": "passed", "start": 1659513667508, "stop": 1659513667629}, {"name": "保存量表基本信息", "status": "passed", "start": 1659513667629, "stop": 1659513667809}, {"name": "添加维度", "status": "passed", "start": 1659513667809, "stop": 1659513677244}, {"name": "量表计分模块", "status": "passed", "start": 1659513677244, "stop": 1659513678903}, {"name": "结果解释模块", "status": "passed", "start": 1659513678904, "stop": 1659513684647}, {"name": "查询新增的维度，检验新增是否成功", "status": "failed", "statusDetails": {"message": "AssertionError: None\nassert 'SCALE1136690...6100454418577' == '测试量表No.769'\n  - 测试量表No.769\n  + SCALE113669022296100454418577\n", "trace": "  File \"C:\\Users\\jay52\\PycharmProjects\\6noble\\case\\oms.py\", line 383, in test_07\n    assert expected_result == scale_name, log.error(f\"添加维度失败，没有找到维度名称为{scale_name}的因子信息\")\n"}, "start": 1659513684647, "stop": 1659513684787}, {"name": "添加失败截图:", "status": "passed", "attachments": [{"name": "失败截图", "source": "6862cc37-f435-4e3f-956b-e82250bd5d6f-attachment.png", "type": "image/png"}], "start": 1659513684798, "stop": 1659513684962}], "attachments": [{"name": "log", "source": "7b7e1d5c-d5c1-49ff-9ba0-b90103ba6010-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "b61ddf59-b3ad-451e-8fd5-a20f5c07f45b-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "scale", "value": "{'new_scale': '//*[@id=\"root\"]/div/section/section/main/div/section/main/div[2]/div[1]/div[2]/div/button', 'factor_name': '因子测试No.${random.int(9999)}', 'check_box': 'td[class=\"ant-table-cell ant-table-selection-column\"]', 'next': '/html/body/div[1]/div/section/section/main/div/div[2]/div[3]/div/form/div[2]/div/div/div/button[2]/span', 'result': '//*[@id=\"root\"]/div/section/section/main/div/div[2]/div[4]/div/form/div[1]/div/div[2]/div/div/div/div/div/div[2]/table/tbody/tr[2]/td[4]/div/div/div/div/div[2]/div/div[2]/div/div', 'txt': '这是结果描述，测试使用', 'expected_result': '/html/body/div[1]/div/section/section/main/div/section/main/div[2]/div[2]/div/div/div/div/div/div[2]/table/tbody/tr[2]/td[3]/span', 'title': '量表管理', 'upload1': '/html/body/div[1]/div/section/section/main/div/div[2]/div[1]/div/div/form/div[1]/div[5]/div/div[2]/div[1]/div/span/div/span/div/div', 'upload2': '/html/body/div[1]/div/section/section/main/div/div[2]/div[1]/div/div/form/div[1]/div[6]/div/div[2]/div[1]/div/span/div/div/span/div/div', 'scale_scoring': '//*[@id=\"advanced_search\"]/div[1]/div/div[1]/div/div[2]/div', 'button': '//*[@id=\"root\"]/div/section/section/main/div/div[2]/div[2]/div/div[3]/button[2]/span'}"}], "start": 1659513661428, "stop": 1659513684788, "uuid": "3132c616-d616-4b23-aa90-cd687716ee2c", "historyId": "43976a3a472e46d5e4195eaa5510abbc", "testCaseId": "92a2fe5a39aaaf716e97f53d401f2ed8", "fullName": "oms#test_07", "labels": [{"name": "epic", "value": "测评管理"}, {"name": "severity", "value": "normal"}, {"name": "story", "value": "量表管理"}, {"name": "suite", "value": "oms"}, {"name": "host", "value": "DESKTOP-FA1JTDA"}, {"name": "thread", "value": "65724-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "oms"}]}